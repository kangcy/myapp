<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../mincss/mui.min.css">
		<style type="text/css">
			body {
				background: #fff;
			}
			
			.flex-row {
				padding: 0.625rem 0.9375rem;
				position: relative;
				background: #fff;
			}
			
			.flex-row img {
				width: 1rem;
			}
			
			.flex-row span {
				line-height: 1.2rem;
			}
			
			.flex-row .flex-item:first-child {
				flex: 0 0 90%;
			}
			
			.flex-row .flex-item:last-child {
				flex: 0 0 10%;
			}
			
			.flex-row .flex-item:last-child {
				display: none;
			}
			
			.flex-row.curr .flex-item:last-child {
				display: block !important;
			}
		</style>
	</head>

	<body>

		<div class="flex-box flex-row f13 mt10" index="0">
			<div class="flex-item">
				<img src="../images/my/1-13.png" class="fl" /><span class="c000 ml5">保密</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13" index="1">
			<div class="flex-item">
				<img src="../images/my/1-01.png" class="fl" /><span class="c000 ml5">白羊座</span><span class="c999 ml10 f10">3.21-4.19</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13" index="2">
			<div class="flex-item">
				<img src="../images/my/1-02.png" class="fl" /><span class="c000 ml5">金牛座</span><span class="c999 ml10 f10">4.20-5.20</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13" index="3">
			<div class="flex-item">
				<img src="../images/my/1-03.png" class="fl" /><span class="c000 ml5">双子座</span><span class="c999 ml10 f10">5.21-6.21</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13" index="4">
			<div class="flex-item">
				<img src="../images/my/1-04.png" class="fl" /><span class="c000 ml5">巨蟹座</span><span class="c999 ml10 f10">6.22-7.22</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13" index="5">
			<div class="flex-item">
				<img src="../images/my/1-05.png" class="fl" /><span class="c000 ml5">狮子座</span><span class="c999 ml10 f10">7.23-8.22</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13" index="6">
			<div class="flex-item">
				<img src="../images/my/1-06.png" class="fl" /><span class="c000 ml5">处女座</span><span class="c999 ml10 f10">8.23-9.22</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13" index="7">
			<div class="flex-item">
				<img src="../images/my/1-07.png" class="fl" /><span class="c000 ml5">天秤座</span><span class="c999 ml10 f10">9.23-10.23</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13" index="8">
			<div class="flex-item">
				<img src="../images/my/1-08.png" class="fl" /><span class="c000 ml5">天蝎座</span><span class="c999 ml10 f10">10.24-11.22</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13" index="9">
			<div class="flex-item">
				<img src="../images/my/1-09.png" class="fl" /><span class="c000 ml5">射手座</span><span class="c999 ml10 f10">11.23-12.21</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13" index="10">
			<div class="flex-item">
				<img src="../images/my/1-10.png" class="fl" /><span class="c000 ml5">摩羯座</span><span class="c999 ml10 f10">12.22-1.19</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13" index="11">
			<div class="flex-item">
				<img src="../images/my/1-11.png" class="fl" /><span class="c000 ml5">水瓶座</span><span class="c999 ml10 f10">1.20-2.18</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
		<div class="flex-box flex-row f13 mb20" index="12">
			<div class="flex-item">
				<img src="../images/my/1-12.png" class="fl" /><span class="c000 ml5">双鱼座</span><span class="c999 ml10 f10">2.19-3.20</span>
			</div>
			<div class="flex-item">
				<img src="../images/my/check.png" class="fr" />
			</div>
		</div>
	</body>

</html>
<script src="../minjs/mui.min.js"></script>
<script src="../minjs/base.min.js"></script>
<script type="text/javascript">
	var currStar = 0;
	var isLoading = false;
	var userinfo = base.GetUserInfo();
	var mask = base.CreateMask(false, function() {
		base.CloseWaiting();
	});

	mui.init();

	mui.ready(function() {
		base.Immersed();

		currStar = userinfo.Star || 0;

		mui(".flex-box[index='" + currStar + "']")[0].classList.add("curr");

		mui("body").on('tap', '.flex-box', function() {
			currStar = this.getAttribute("index");
			base.RemoveClass([".flex-box"], "curr");
			this.classList.add("curr");
		});
	})

	function Confirm() {
		if(isLoading) {
			return false;
		}
		isLoading = true;
		mask.show();
		base.ShowWaiting("正在保存");
		HttpGet(base.RootUrl + "User/EditStar", {
			ID: userinfo.ID,
			Star: currStar
		}, function(data) {
			mui.later(function() {
				mask.close();
				if(data.result) {
					userinfo.Star = currStar;
					localStorage.setItem('$userinfo', JSON.stringify(userinfo));
					console.log(JSON.stringify(base.GetUserInfo()))
					base.GetView("mysetting").evalJS("UpdateStar(" + currStar + ")");
					mui.back();
					//plus.webview.currentWebview().parent().close();
				} else {
					mui.toast(data.message);
				}
				isLoading = false;
			}, 500);
		});
	}
</script>
<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../mincss/mui.min.css">
	</head>

	<body>
		<header id="header" class="mui-bar mui-bar-nav" style="background:#fff;">
			<a class="mui-icon mui-icon-back mui-action-back fl cfff"></a>
			<a class="mui-icon mui-text cfff fr hide" id="pic" onclick="Confirm()">删除</a>
			<a class="mui-icon mui-icon-plus fr cfff hide" id="add" onclick="AddUser()"></a>
			<div class="mui-title cfff" id="title"></div>
		</header>
	</body>

</html>
<script src="../minjs/mui.min.js"></script>
<script src="../minjs/base.min.js"></script>
<script type="text/javascript">
	var tempview = null;
	var currview = null;
	var currviewid = "";
	var mask = base.CreateMask(false, function() {
		base.CloseWaiting();
	});
	mui.init({
		gestureConfig: {
			doubletap: true
		}
	});

	mui.ready(function() {
		base.Immersed();
	});

	mui.plusReady(function() {
		mui.back = function() {
			if(currview != null) {
				tempview.remove(currview); //移除子页面
			}
			plus.webview.currentWebview().hide("auto", base.AnimateDuration);
			base.Get("title").innerHTML = "";
			base.AddClass(["#confirm", "#add"], "hide");
		}
	})

	//加载子页面
	function InitPage(id, url, title, param) {
		if(!base.IsNullOrEmpty(title)) {
			base.Get("title").innerHTML = title;
		}
		if(base.IsNullOrEmpty(param)) {
			param = {};
		} else {
			param = JSON.parse(param);
		}
		tempview = plus.webview.currentWebview();

		/*tempview.setStyle({
			mask: "rgba(0,0,0,0.5)"
		});
		// 点击关闭遮罩层
		tempview.addEventListener("maskClick", function() {
			tempview.setStyle({
				mask: "none"
			});
		}, false);*/

		currview = plus.webview.create(url, id, {
			top: base.Get("header").clientHeight + "px",
			bottom: "0px",
			bounce: "vertical",
			scrollIndicator: "none"
		}, param);
		tempview.append(currview);
	}

	//重置标题
	function InitTitle(title) {
		base.Get("title").innerHTML = title;
	}

	//重置操作
	function InitAction(id, show) {
		currviewid = id;
		if(show) {
			base.Get(id).classList.remove("hide");
		} else {
			base.Get(id).classList.add("hide");
		}
	}

	//添加关注
	function AddUser() {
		base.OpenWindow("addfan", "addfan.html", {});
	}

	function Confirm() {
		switch(currviewid) {
			case "pic";
			base.GetView("pic").evalJS("Confirm()");
			break;
		}

	}
</script>
<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>打赏</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../css/mui.min.css">
		<style type="text/css">
			.items {
				width: 90%;
				display: inline-block;
			}
			
			.items .item {
				width: 33.3%;
				float: left;
				display: inline-block;
				text-align: center;
			}
			
			.items .item2 {
				width: 66.6%;
				float: left;
				display: inline-block;
				text-align: center;
			}
			
			.items .item div {
				width: 80%;
				display: inline-block;
				border: 1px solid #999;
				height: 1.8rem;
				line-height: 1.8rem;
				border-radius: 20px;
				margin-bottom: 0.8rem;
				background: #fff;
			}
			
			.items .item.check,
			.items .item div.check {
				color: #ed5565;
				border: 1px solid #BF403A;
			}
			
			.items .item div.noborder {
				border: 0px;
			}
			
			#txtmoney {
				height: 1.8rem;
				text-align: center;
				width: 100%;
				border: 0px;
				border-bottom: 1px solid #999;
				padding: 3px;
				color: #BF403A;
				background: transparent;
			}
			
			#btnPay {
				position: fixed;
				left: 10px;
				bottom: 110px;
				z-index: 999;
			}
			
			#payuser {
				width: 6rem;
				height: 6rem;
				border-radius: 100%;
			}
			
			.payment {
				/*position: fixed;
				bottom: 4rem;*/
				left: 10%;
				width: 80%;
				height: 2.5rem;
				line-height: 2.5rem;
				border-radius: 30px;
				background: #FBEAD2;
				color: #BF403A;
				display: inline-block;
			}
			
			.anony {
				/*position: fixed;
				bottom: 1.5rem;*/
				left: 10%;
				width: 80%;
				color: #FBEAD2;
				display: inline-block;
				height: 1rem;
				background-image: url(../images/pay/nm1.png);
				background-size: 1rem;
				background-position: 5rem 0rem;
				background-repeat: no-repeat;
				line-height: 1rem;
			}
			
			.anony.curr {
				background-image: url(../images/pay/nm2.png);
			}
			
			.payway {
				width: 85%;
				height: 2rem;
				line-height: 2rem;
				display: inline-block;
				position: relative;
				text-indent: 2rem;
			}
			
			.payway div {
				top: 0px;
				position: absolute;
				width: 56%;
				height: 2rem;
				line-height: 2rem;
				border-radius: 30px;
				z-index: 0;
				border: 1px solid #999;
				background: #fff;
			}
			
			.payway div.alipay {
				left: 0px;
				background-image: url(../images/pay/zfb2.png);
				background-size: 1.5rem;
				background-position: 2.5rem 0.25rem;
				background-repeat: no-repeat;
			}
			
			.payway div.alipay.curr {
				background-image: url(../images/pay/zfb1.png);
				color: #019FE6;
				border: 1px solid #BF403A;
			}
			
			.payway div.weixin {
				right: 0px;
				background-image: url(../images/pay/wx2.png);
				background-size: 1.5rem;
				background-position: 2.5rem 0.25rem;
				background-repeat: no-repeat;
			}
			
			.payway div.weixin.curr {
				background-image: url(../images/pay/wx1.png);
				color: #46B034;
				border: 1px solid #BF403A;
			}
			
			.payway div.curr {
				z-index: 1;
			}
			
			.radio,
			.checkbox {
				position: initial !important;
			}
			
			.mui-radio span,
			.mui-checkbox span {
				width: 4rem;
				display: inline-block;
				text-align: left;
			}
			
			body {
				background: url(../images/pay/bg.png) center center no-repeat;
				background-size: cover;
			}
		</style>
	</head>

	<body id="body">
		<header class="mui-bar mui-bar-nav" style="background:#fff;">
			<a class="mui-icon mui-icon-back mui-action-back fl c333"></a>
			<div class="mui-title c333" id="title"></div>
		</header>
		<div class="mui-content tc caaa">
			<img id="payuser" src="" class="mt20" />
			<div id="price" class="items c999 mt20 f13">
				<div class="item">
					<div class="choosemoney check" money="5.88">5.88元</div>
				</div>
				<div class="item">
					<div class="choosemoney" money="8.88">8.88元</div>
				</div>
				<div class="item">
					<div class="choosemoney" money="12.88">12.88元</div>
				</div>
				<div class="item">
					<div class="choosemoney" money="18.88">18.88元</div>
				</div>
				<div class="item">
					<div class="choosemoney" money="28.88">28.88元</div>
				</div>
				<div class="item">
					<div class="choosemoney" money="88.88">88.88元</div>
				</div>
				<div class="item">
					<div id="otherMoney" onclick="OtherMoney()">其他金额</div>
				</div>
				<div class="item2 hide" id="divMoney">
					<input type="number" id="txtmoney" class="f30" value="5.88" /> 
				</div>
			</div>
			<div class="payway f13">
				<div id="alipay" class="alipay" onclick="ChangePayWay(0)">支付宝</div>
				<div id="weixin" class="weixin curr" onclick="ChangePayWay(1)">微信</div>
			</div>
			<div class="f13 payment bold" onclick="Payment()">赞&nbsp;赏</div>
			<div class="f13 anony mt20" onclick="Anony()" id="anony">
				匿名赞赏
			</div> 
		</div>
	</body>

</html>
<script src="../js/jquery-1.10.2.min.js"></script>
<script src="../js/mui.min.js"></script>
<script src="../js/base.js"></script>
<script src="../js/payment.js"></script>
<script type="text/javascript">
	var isLoading = false;
	var anony = false; //匿名
	var ArticleNumber = "";
	var ArticleUserNumber = "";
	var userinfo = base.GetUserInfo();

	mui.init();

	mui.ready(function() {
		var height = window.innerHeight - ($("#price").height() + $("#payuser").height() + 150);
		$(".payment").css("margin-top", height / 2 + "px");

		//金额切换
		$(".choosemoney").click(function() {
			$("#divMoney").addClass("hide");
			var $this = $(this);
			$("#txtmoney").val($this.attr("money"));
			$(".check").removeClass("check");
			$this.addClass("check");
		});
	});

	mui.plusReady(function() {
		var self = plus.webview.currentWebview();
		ArticleNumber = self.ArticleNumber || "";
		ArticleUserNumber = self.ArticleUserNumber || "";
		var Name = self.Name || "";
		var Avatar = self.Avatar || "";

		if(!base.IsNullOrEmpty(Name)) {
			$("#title").html("打赏 • " + Name);
		}
		$("#payuser").attr("src", base.ShowThumb(Avatar, 1));

		//获取支付通道
		plus.payment.getChannels(function(channels) {
			for(var i in channels) {
				var c = channels[i];
				if(c.id == 'qhpay' || c.id == 'qihoo') {
					continue;
				}
				channel[c.id] = c;
			}
		}, function(e) {
			console.log("获取支付通道失败：" + e.message);
		});
	});

	//其他金额
	function OtherMoney() {
		$(".check").removeClass("check");
		$("#otherMoney").addClass("check");
		$("#divMoney").removeClass("hide");
		$("#txtmoney").val("");
	}

	//是否匿名
	function Anony() {
		anony = !anony;
		if(anony) {
			$("#anony").addClass("curr");
		} else {
			$("#anony").removeClass("curr");
		}
	}
</script>
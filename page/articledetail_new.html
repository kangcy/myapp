<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../mincss/mui.min.css">
		<link rel="stylesheet" href="../mincss/loading.min.css">
		<link rel="stylesheet" href="../mincss/animate.min.css">
		<link rel="stylesheet" href="../mincss/input.min.css">
		<link rel="stylesheet" href="../css/articledetail.min.css">
		<link rel="stylesheet" href="../css/demo.css">
		<style type="text/css">
			#topPopover {
				position: fixed;
				top: 80px !important;
				right: 6px;
			}
			
			#topPopover .mui-popover-arrow {
				left: auto;
				right: 6px;
			}
			
			#snowcanvas {
				pointer-events: none;
				position: fixed;
				z-index: 20;
				width: 100%;
				height: 100%;
				left: 0;
				top: 0;
			}
			/**æ–°ç‰ˆ**/
			
			#x-bg {
				position: fixed;
				height: 100%;
				width: 100%;
				background: url(https://ss2.meipian.me/theme/v2/img/77/77bg_750_1.jpg) center 0 no-repeat;
				background-size: cover;
			}
			
			.root {
				height: 100%;
				position: relative;
				z-index: 0;
			}
			
			.root.x-cover {
				width: 100%;
				position: relative;
				z-index: 1;
				background-image: url(https://ss2.meipian.me/theme/v2/img/059/bg.jpg?1);
				background-size: 100% auto;
				background-repeat: no-repeat;
				min-height: 100%;
				background-color: #426a76;
			}
			
			.x-head {
				position: relative;
			}
			
			.x-head .img-container {
				padding-top: 10%;
			}
			
			.x-head .img-container .avatar {
				width: 75px;
				height: 75px;
				margin: 0 auto;
				background-size: 100% 100%;
				overflow: hidden;
				border-radius: 50%;
				-webkit-box-sizing: border-box;
				box-sizing: border-box;
				border: 2px solid #fff;
			}
			
			.x-head .img-container .avatar img {
				width: 100%;
			}
			
			.root .article-meta {
				overflow: hidden;
				text-align: center;
				padding-top: 32px;
				word-wrap: break-word;
			}
			
			.root .article-meta .title {
				color: #FFFFFF;
			}
			
			.root .article-meta p.time-read {
				font-family: PingFangSC-Regular;
				margin-top: 10px;
				font-size: 14px;
				color: #9F9F9F;
				letter-spacing: 0;
				line-height: 20px;
			}
			
			.root .article-meta p.time-read>span {
				margin-left: 10px;
			}
			
			.root .article-meta p.nickname {
				font-family: PingFangSC-Medium;
				font-size: 15px;
				color: #7BCEFF;
				letter-spacing: 0;
				margin: 10px 0;
				line-height: 20px;
			}
			
			.x-content {
				position: relative;
			}
			
			.x-content .section {
				display: inline-block;
				padding: 3%;
			}
			
			.x-content .section .text {
				line-height: 1.8 !important;
				word-wrap: break-word;
				font-weight: normal;
				white-space: pre-wrap;
				font-family: PingFangSC-Light;
			}
			
			.x-content .section img {
				width: 100%;
				vertical-align: bottom;
			}
			
			.x-content .x-bg-blur {
				background: rgba(27, 62, 85, 0.6);
				width: 94%;
				height: 100%;
				z-index: -1;
				top: 0;
				-webkit-backdrop-filter: blur(12px);
				position: absolute;
				border-radius: 8px;
			}
			
			h1 {
				font-size: 24px;
				font-weight: normal;
				color: #CDCDCD;
				letter-spacing: 0;
				line-height: 36px;
				margin: 0;
			}
			
			html,
			body {
				color: #CDCDCD;
				font-family: PingFangSC-Regular;
				font-size: 16px;
			}
			
			.well {
				padding: 0 3%;
			}
		</style>
	</head>
	<!--ç¦æ­¢å¤åˆ¶-->

	<body id="body" oncontextmenu="return false" onselectstart="return false" class="">
		<header id="header" class="mui-bar" immersed="none">
			<span class="mui-action-back mui-icon mui-icon-left-nav fl cfff"></span>
			<a id="action" class="cfff f25 fr hide" href="#topPopover" style="padding-top:0.35rem;padding-right: 0.4rem;">â€¢â€¢â€¢</a>
			<h1 class="mui-title cfff user" id="nickname"></h1>
		</header>
		<div class="loading hide" id="loader">
			<div class="card">
				<span class="circles-loader"></span>
			</div>
		</div>

		<!--æ“ä½œ-->
		<div id="topPopover" class="mui-popover">
			<div class="mui-popover-arrow"></div>
			<ul class="mui-table-view tc f12" style="background:#fff;">
				<li id="popover_delete" onclick="Delete()" class="mui-table-view-cell" style="background:url(../images/article/1.png) no-repeat;background-size: 1.1rem;background-position: 40%;text-indent: 10%;">
					åˆ é™¤
				</li>
				<li id="popover_copy" onclick="Copy()" class="mui-table-view-cell" style="background:url(../images/article/2.png) no-repeat;background-size: 1.1rem;background-position: 40%;text-indent: 10%;">
					å¤åˆ¶
				</li>
				<li id="popover_edit" onclick="Edit()" class="mui-table-view-cell" style="background:url(../images/article/3.png) no-repeat;background-size: 1.1rem;background-position: 40%;text-indent: 10%;">
					ç¼–è¾‘
				</li>
				<li id="popover_power" onclick="Power()" class="mui-table-view-cell" style="background:url(../images/article/4.png) no-repeat;background-size: 1.1rem;background-position: 40%;text-indent: 10%;">
					æƒé™
				</li>
			</ul>
		</div>

		<!--æ¼‚æµ®ç‰¹æ•ˆ-->
		<div id="snowwrapper"></div>
		<canvas id="snowcanvas"></canvas>
		<div id="self" class="full tc hide">
			<img src="../images/article/stop.png" class="none" />
			<p class="mt20 f16 c333">ç§å¯†æ–‡ç« </p>
			<p class="mt10 f12 c999">æ‚¨æŸ¥çœ‹çš„æ˜¯ç§å¯†æ–‡ç« ,ä»…ä½œè€…è‡ªå·±å¯è§</p>
		</div>
		<div id="password" class="full tc hide">
			<img src="../images/article/stop.png" class="none" />
			<p class="mt20 f12 c999">æ–‡ç« å·²è®¾æƒé™,è¯·è¾“å…¥å¯†ç æµè§ˆ</p>
			<div id="input-form">
				<div class="pwd mt10 mui-input-row">
					<input id='pwd' type="password" class="mui-input-password text f13" placeholder="è¯·è¾“å…¥ä½å¯†ç " maxlength="4" /><span class="mui-icon mui-icon-eye" style="top:0.8rem !important;"></span>
				</div>
				<div id="submit" class="input mt20 tc fl">
					è§£&nbsp;é”
				</div>
			</div>
		</div>
		<!--åº•éƒ¨-->
		<div class="mui-bar mui-bar-tab hide" id="bottomAction" style="background:#fff;">
			<div class="flex-box flex-row f13 tc" style="padding:5px 5px;">
				<div style="flex:0 0 50%;" class="flex-item">
					<div id="addcomment">
						<div class="c666 f12">æˆ‘æ¥è¯´ä¸€å¥</div>
					</div>
				</div>
				<div style="flex:0 0 20%;" class="flex-item">
					<div id="divzan" style="display:inline-block;" class="fl"><img id="zan" src="../images/article/btn_good2.png" style="width:1rem;" class="mr10 fl" /><span class="f13 fl" id="footer_zan">0</span></div>
				</div>
				<div style="flex:0 0 20%;" class="flex-item">
					<img id="comment" src="../images/article/btn_comment.png" style="width:1rem;" class="mr10 fl" /><span class="f13 fl" id="footer_comment">0</span>
				</div>
				<div style="flex:0 0 10%;" class="flex-item">
					<img id="share" src="../images/article/btn_share.png" style="width:1rem;" class="mr10 fr" onclick="ShareTan(1)" />
				</div>
			</div>
		</div>
		<!--åˆ†äº«-->
		<div class="myshare hide" id="myshare">
			<p class="f16 c000 tc mt10 mb0">åˆ†äº«åˆ°</p>
			<div class="tc c000 myshare_body">
				<div class="myshare_items" onclick="ShareAction(1)"><img src="../images/share/01.png" />
					<p class="f11 mb0 c000">æœ‹å‹åœˆ</p>
				</div>
				<div class="myshare_items" onclick="ShareAction(2)"><img src="../images/share/02.png" />
					<p class="f11 mb0 c000">å¾®ä¿¡</p>
				</div>
				<div class="myshare_items" onclick="ShareAction(3)"><img src="../images/share/03.png" />
					<p class="f11 mb0 c000">æ–°æµªå¾®åš</p>
				</div>
				<div class="myshare_items" onclick="ShareAction(4)"><img src="../images/share/04.png" />
					<p class="f11 mb0 c000">QQ</p>
				</div>
				<div class="myshare_items" onclick="ShareAction(5)"><img src="../images/share/05.png" />
					<p class="f11 mb0 c000">QQç©ºé—´</p>
				</div>
				<div class="myshare_items" onclick="ShareAction(6)"><img src="../images/share/06.png" />
					<p class="f11 mb0 c000">å…¶ä»–</p>
				</div>
				<div class="myshare_items" onclick="ShareAction(7)"><img src="../images/share/07.png" />
					<p class="f11 mb0 c000">å¤åˆ¶é“¾æ¥</p>
				</div>
				<div id="isnotkeep" class="myshare_items hide" onclick="ShareAction(8)"><img src="../images/share/08.png" />
					<p class="f11 mb0 c000" style="">æ”¶è—</p>
				</div>
				<div id="iskeep" class="myshare_items hide" onclick="ShareAction(10)"><img src="../images/share/010.png" />
					<p class="f11 mb0 c000" style="">å·²æ”¶è—</p>
				</div>
				<div id="report" class="myshare_items" onclick="ShareAction(9)"><img src="../images/share/09.png" />
					<p class="f11 mb0 c000">ä¸¾æŠ¥</p>
				</div>
				<div class="c000 mt10 f11 fl btnExit" onclick="ShareTan(2)">å–æ¶ˆ</div>
			</div>
		</div>
		<!--æ‰“èµ-->
		<img class="tada hide" src="../images/article/money.png" onclick="PaymentTan()" style="width:4rem;z-index:99;" id="btnPay"></i>
		<img id="music1" class="hide" src="../images/article/btn_music.png" onclick="switchsound()" />

		<!--å›ºå®šèƒŒæ™¯-->
		<div id="x-bg"></div>
		<!--å†…å®¹-->
		<div id="root">
			<!--x-cover:æ»šåŠ¨èƒŒæ™¯-->
			<div class="root x-cover">
				<!--å¤´éƒ¨-->
				<div class="x-head">
					<div class="img-container">
						<div class="avatar">
							<img src="http://static2.ivwen.com/users/19717149/4c100df219344c9986ab80e81cf4d171.jpg" alt="">
						</div>
					</div>
					<div class="article-meta">
						<div class="well">
							<h1 class="title">æ‚¨å¥½ï¼å¯ä»¥ç»­æ¯å—ï¼Ÿ</h1>
							<p class="time-read">
								<span>2017.10.11</span>
								<span>é˜…è¯» <span class="read-count">223</span></span>
							</p>
							<p class="nickname" data-author-id="19717149" data-author-url="https://www.meipian.cn/c/19717149">ç»äº‹</p>
						</div>
					</div>
				</div>
				<!--å†…å®¹-->
				<div class="x-content well mt20">
					<div class="section">
						<div class="text fl tl mt10">ä¹‹å‰çœ‹è¿‡ä¸€éƒ¨ç”µå½±ã€Šä¸ƒæœˆä¸å®‰ç”Ÿã€‹ï¼Œé‡Œé¢çš„ä¸¤ä½ä¸»äººå…¬æ—ä¸ƒæœˆå’Œæå®‰ç”Ÿæ„Ÿæƒ…æ·±å¦‚äº²ç”Ÿå§å¦¹ï¼Œå´å› ä¸ºå–œæ¬¢åŒä¸€ä¸ªäººï¼Œæ„Ÿæƒ…ä¸­é€”ç ´è£‚ï¼Œé—¹å¾—ä¸å¯å¼€äº¤ã€‚å¥¹ä»¬ç›¸çˆ±ç›¸æ€ï¼Œå¿ƒé‡Œè®°æŒ‚å½¼æ­¤å˜´ä¸Šå´è¯´ä¸å‡ºæ¥ã€‚å¥½åœ¨æœ€ç»ˆå†°é‡Šå‰å«Œï¼Œä¸¤äººé‡å½’äºå¥½ã€‚å¯ä»¤äººæƒ³ä¸åˆ°çš„æ˜¯ï¼Œä¸¤ä¸ªäººå¹¶æ²¡æœ‰èƒ½å¤Ÿç›¸å®ˆåœ¨ä¸€èµ·ï¼Œåªç•™ä¸‹å®‰ç”Ÿä¸€ä¸ªäººç…§é¡¾ç€ä¸ƒæœˆçš„å°å§‘å¨˜ğŸ˜”ã€‚ æˆ‘ä»¬è¿˜èƒ½åœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œå› ä¸ºå¾ˆå¤šäº‹æƒ…å¯ä»¥äº‰åµï¼Œä¸€æ—¦åˆ°çœŸæ­£æ°¸è¿œåˆ†åˆ«çš„æ—¶å€™ï¼Œæ‰å‘ç°ï¼Œè¶Šå›å¿†è¶Šæ¨¡ç³Šï¼Œè¿˜æ²¡æœ‰å¥½å¥½çæƒœå°±å·²ç»æ¥ä¸åŠã€‚ æˆ‘ä»¬æ€»ä¼šå› ä¸ºä¸€ç‚¹å°çš„å¯æ€œçš„è‡ªå°Šè€Œé”™è¿‡äº†æœ€ç¾å¥½çš„æ„Ÿæƒ…ï¼Œå› ä¸ºæ²¡äººæ„¿æ„å…ˆä½å¤´ã€‚å¹¶ä¸æ˜¯å› ä¸ºæ„Ÿæƒ…ä¸å¥½ã€ä¸å’Œè°ï¼Œåè€Œæ­£æ˜¯å½¼æ­¤äº†è§£ï¼Œä»¥ä¸ºè¶³å¤Ÿåœ¨æ„ï¼Œæ‰€ä»¥ä¸ä¼šè½»æ˜“ç¦»å¼€ã€‚å¯ä¸è¨€ä¸è¯­è¶ŠåŠ æ·±äº†è¯¯ä¼šï¼Œæœ€åè½äº†ä¸ªæ›²ç»ˆäººæ•£çš„ç»“å±€ã€‚</div>
						<img class="fl mt10" src="http://static2.ivwen.com/users/19717149/36a44de8016d4f6eaa4e62b37bd47f5b.jpg-mobile">
					</div>
					<!--åŠé€æ˜è’™å±‚-->
					<div class="x-bg-blur"></div>
				</div>
			</div>
		</div>
		<div id="wrapper" class="hide" style="margin-bottom:50px;">
			<div class="mui-content" style="overflow-x:hidden;" id="wrapper1">
				<!--é€šç”¨æ ·å¼-->
				<div id="main0" class="f13 tl mt10 hide">
					<div class="detail">
						<div class="full tl mb5">
							<p class="f16 mb10" id="title0"></p>
							<span class="mt0 mb0 f13" id="createdate0"></span>
							<span class="mb0 ml10 user mt5" userid="0" id="nickname0"></span>
							<span class="mt0 mb0 ml10 f13" id="views0"></span>
							<p id="music0" play="on" class="music mt10" onclick="switchsound()">
								<span id="musicname0"></span>
							</p>
						</div>
					</div>
				</div>
				<!--æ’ç‰ˆ1-->
				<div id="main1" class="f13 tc hide" style="position:relative;">
					<div class="detail full fl" id="detail1">
						<div class="fl" style="width:23%;display:inline-block;">
							<img id="useravatar1" class="full fl article" />
						</div>
						<div class="fr tl" style="width:77%;display:inline-block;">
							<p class="user ml10 mt15 mb5 f15 fl full bold" userid="0" id="nickname1"></p>
							<p class="ml10 mb0 mt20 f13 full">
								<span id="createdate1" class="mr10"></span>
								<span class="ml15" id="views1"></span>
							</p>
						</div>
					</div>
				</div>
				<div class="detail2 cover fl tl" id="cover">
					<p class="f16 tc hide mt10 mb20" id="title1"></p>
					<div class="c333 full" id="desc">

					</div>
				</div>
			</div>
		</div>
	</body>

</html>
<script src="../minjs/mui.min.js"></script>
<script src="../minjs/base.min.js"></script>
<script src="../js/music.js"></script>
<script src="http://player.youku.com/jsapi"></script>
<script src="../js/video.js"></script>
<script src="../js/articledetail.js"></script>
<script src="../js/snow.js"></script>
<script type="text/javascript">
	var Article = {};
	var ArticleID = 0; //æ–‡ç« ID
	var Source = ""; //æ¥æº
	var ShareInfo = {}; //åˆ†äº«ä¿¡æ¯
	var isLoading = false;
	var currEditID = 0; //å½“å‰æ“ä½œå¯¹è±¡ID
	var MusicID = ""; //éŸ³ä¹æ§ä»¶ID
	var MusicUrl = "";
	var CurrBackground = null; //èƒŒæ™¯è®¾ç½®
	var CurrCover = ""; //å½“å‰èƒŒæ™¯å›¾ç‰‡
	var CurrColor = ""; //æ¨¡æ¿èƒŒæ™¯è‰²
	var CurrTemplate = 0; //å½“å‰é€‰ä¸­æ¨¡æ¿
	var CurrBackgroundName = ""; //å½“å‰çº¯è‰²èƒŒæ™¯æ ·å¼
	var CurrTemplateType = 0; //å½“å‰æ¨¡æ¿ç±»å‹
	var userinfo = base.GetUserInfo();

	var $divzan = base.Get("divzan");
	var $zan = base.Get("zan");
	var $footer_zan = base.Get("footer_zan");
	var $header = base.Get("header");
	var $wrapper = base.Get("wrapper"); //å†…å®¹çˆ¶èƒŒæ™¯ï¼ˆæ”¾å›¾ç‰‡èƒŒæ™¯è‰²ï¼‰
	var $wrapper1 = base.Get("wrapper1"); //å†…å®¹å­èƒŒæ™¯ï¼ˆæ”¾èƒŒæ™¯å›¾ç‰‡ï¼‰
	var $wrapper2 = base.Get("wrapper2"); //çº¯è‰²èƒŒæ™¯
	var $cover = base.Get("cover"); //éçº¯è‰²å†…å®¹é€æ˜åº¦åº•
	var scrolly = 0;
	var browserName = base.BrowserName();
	var num = 0;

	//æ˜¾ç¤ºé®ç½©
	var mask = base.CreateMask(true, function() {
		ShareTan(0);
		mui('#topPopover').popover('hide');
		base.CloseWaiting();
	});

	//å¯ç”¨åŒå‡»ç›‘å¬ 
	mui.init({
		gestureConfig: {
			doubletap: true
		}
	});

	mui.ready(function() {
		base.Immersed();
		base.ToTop();

		$wrapper2.style.width = window.innerWidth + "px";
		$wrapper2.style.height = window.innerHeight + "px";
		$wrapper2.style.position = "fixed";
		$wrapper2.style.zIndex = "-1";

		//base.Get("wrapper1").style.minHeight = (window.innerHeight - 50) + "px";
		base.Get("detail1").style.marginTop = (window.innerHeight - 50) * 0.3 + "px";
		$cover.style.minHeight = (window.innerHeight - 50) * 0.526 + "px";

		//èƒŒæ™¯è‰²æ¸å˜
		window.addEventListener('scroll', function(e) {
			num = window.pageYOffset / 200;
			if(CurrTemplate > 0) {
				if(num <= 1) {
					$header.style.background = browserName + 'linear-gradient(left,rgba(78,140,251,' + num + ') 0%,rgba(36,195,251,' + num + ') 75%,rgba(57,184,253,' + num + ') 100%)';
				}
			}
		});

		//ç‚¹èµ
		$divzan.addEventListener('tap', function(event) {
			if(isLoading) {
				return;
			}
			isLoading = true;
			HttpGet(base.RootUrl + "Api/Zan/ArticleZanEdit", {
				ID: userinfo.ID,
				ArticleID: ArticleID
			}, function(data) {
				data = JSON.parse(data);
				base.CheckLogin(userinfo, data.code);
				if(data != null) {
					if(data.result) {
						var already = data.message.split('|');
						if(already[0] == 1) {
							$zan.setAttribute("already", "0");
							$zan.setAttribute("src", "../images/article/btn_good.png");
							$footer_zan.classList.remove("red");
							$footer_zan.classList.add("c666");
							$divzan.classList.remove("heartbeat");
						} else {
							$zan.setAttribute("already", "1");
							$zan.setAttribute("src", "../images/article/btn_good2.png");
							$footer_zan.classList.remove("c666");
							$footer_zan.classList.add("red");
							$divzan.classList.add("heartbeat");
						}
						base.Get("footer_zan").innerHTML = already[1];
					} else {
						mui.toast(data.message);
					}
				} else {
					mui.toast("å¤±è´¥");
				}
				isLoading = false;
			});
		})

		//æ·»åŠ è¯„è®º
		base.Get('addcomment').addEventListener('tap', function(event) {
			var param = {
				ArticleID: ArticleID,
				ArticleNumber: Article.Number,
				Action: "Add"
			}
			base.OpenWindow("articleComment", "articleComment.html", param);
		})

		//æ–‡ç« è¯„è®º
		base.Get('comment').addEventListener('tap', function(event) {
			var param = {
				ArticleID: ArticleID,
				ArticleNumber: Article.Number
			}
			base.OpenWindow("articleComment", "articleComment.html", param);
		});

		//è§£é”
		base.Get('submit').addEventListener('tap', function(event) {
			if(isLoading) {
				return false;
			}
			isLoading = true;
			var pwd = base.Get("pwd").value;
			if(base.IsNullOrEmpty(pwd)) {
				isLoading = false;
				return mui.toast("è¯·å¡«å†™è§£é”å¯†ç ");
			}
			CheckPowerPwd(ArticleID, pwd, function() {
				base.Get("password").classList.add("hide");
				$wrapper.classList.remove("hide");
				isLoading = false;
			});
		});

		//æ‰“å¼€å¤–é“¾
		mui('#wrapper').on('tap', 'a.link', function() {
			var link = this.getAttribute("link");
			if(base.IsNullOrEmpty(link)) {
				return;
			}
			base.OpenWindow("showhref", "showhref.html", {
				Link: link
			});
		});

		base.ShowUser("#body");
	});

	var Intent = null,
		File = null,
		Uri = null,
		main = null;
	var self = null,
		wc = null;

	mui.plusReady(function() {
		self = plus.webview.currentWebview();
		Source = self.Source || "Add";
		ArticleID = self.ArticleID || 0;
		NickName = self.NickName || "";

		//åˆ†äº«è®¾ç½®
		updateSerivces();

		if(plus.os.name == "Android") {
			Intent = plus.android.importClass("android.content.Intent");
			File = plus.android.importClass("java.io.File");
			Uri = plus.android.importClass("android.net.Uri");
			main = plus.android.runtimeMainActivity();
		}

		Load(function(data) {
			mui.later(function() {
				plus.webview.close("sharesetting", "none");
				plus.webview.close("articlepreview", "none");
				plus.webview.close("addarticle", "none");
				plus.webview.hide("addimage");
			}, 500);
			//æ˜¾ç¤ºæ“ä½œ
			if(userinfo.ID != data.UserID) {
				base.ShowUser("#body");
			} else {
				base.RemoveClass(["#action"], "hide");
			}
		});

		//è¿”å›
		mui.back = function() {
			if(Source == "Add") {
				plus.webview.close("editimage", "none");
			}
			plus.webview.close(self);
		}
	});

	//éªŒè¯æƒé™å¯†ç 
	function CheckPowerPwd(articleid, pwd, callback) {
		HttpGet(base.RootUrl + "Article/CheckPowerPwd", {
			ArticleID: articleid,
			ArticlePowerPwd: pwd
		}, function(data) {
			if(data != null) {
				if(data.result) {
					if(callback) {
						callback();
					}
					return;
				}
			}
			mui.toast("è§£é”å¤±è´¥");
		});
	}

	//å¤åˆ¶åˆ°å‰ªè´´æ¿
	function CopyToClip() {
		var Context = plus.android.importClass("android.content.Context");
		var main = plus.android.runtimeMainActivity();
		var clip = main.getSystemService(Context.CLIPBOARD_SERVICE);
		plus.android.invoke(clip, "setText", ShareInfo.Url);
		mui.toast("åˆ†äº«é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿");
	}

	//åŠ è½½æ–‡ç« 
	function Load(callback) {
		HttpGet(base.RootUrl + "Api/Article/Detail", {
			Number: userinfo.Number,
			ArticleID: ArticleID
		}, function(data) {
			data = JSON.parse(data);
			if(data != null) {
				if(data.result) {
					data = data.message;

					//ä¸æ˜¯æœ¬äºº
					if(userinfo.Number != data.CreateUserNumber) {
						//ç§å¯†å¯è§ 
						if(data.ArticlePower == 0) {
							$wrapper.classList.add("hide");
							base.Get("self").classList.remove("hide");
						}
						//å¯†ç å¯è§ 
						else if(data.ArticlePower == 1) {
							$wrapper.classList.add("hide");
							base.Get("password").classList.remove("hide");
						} else {
							$wrapper.classList.remove("hide");
							mui.later(function() {
								InitShowy(data.Showy);
							}, 1000)
						}
					} else {
						$wrapper.classList.remove("hide");
						base.AddClass(["#iskeep", "#isnotkeep", "#report"], "hide");
						mui.later(function() {
							InitShowy(data.Showy);
						}, 1000)
					}

					Article = data;
					Article.Title = base.UnUnicodeText(data.Title);
					Article.NickName = base.UnUnicodeText(data.NickName);

					MusicUrl = data.MusicUrl;
					if(audio != null) {
						var item = document.getElementById("bgsound")
						item.parentNode.removeChild(item);
						audio = null;
					}

					mui.each(mui(".user"), function(i, item) {
						item.setAttribute("userid", data.CreateUserNumber);
						item.setAttribute("nickname", data.NickName);
						item.setAttribute("avatar", data.Avatar);
						item.setAttribute("cover", data.Cover);
					})

					//æ®µè½ 
					var html = [];
					var parts = data.ArticlePart;
					for(var i = 0; i < parts.length; i++) {
						var part = parts[i];
						if(part.Types == 1) {
							//å›¾ç‰‡
							html.push('<div class="full f13 fl mb10 ' + part.IntroExpand + '"><img src="' + base.ShowThumb(part.Introduction, 1) + '" class="full fl" /></div>');
						} else if(part.Types == 2) {
							//æ–‡æœ¬
							html.push('<div class="full f13 fl mb10">' + base.UnUnicodeText(part.Introduction) + '</div>');
						} else if(part.Types == 3) {
							//è§†é¢‘
							html.push('<div class="full f13 fl mb10 hide" style="display:inline-block;">' + AppendVideo(part.Introduction) + '</div>');
							//html.push('<div class="full f13 mt5" style="display:inline-block;position:relative;">' + AppendVideo(part.Introduction) + '<img src="../images/article/bg.png" style="width:3.5rem;position:absolute;top:40%;left:40%;" /></div>');
						} else if(part.Types == 4) {
							//åˆ†éš”
							html.push('<div class="full f13 fl mb10" style="display:inline-block;">' + part.Introduction + '</div>');
						}
					}

					if(data.IsZan > 0) {
						$zan.setAttribute("already", "1");
						$zan.setAttribute("src", "../images/article/btn_good2.png");
						$footer_zan.classList.remove("c666");
						$footer_zan.classList.add("red");
					} else {
						$zan.setAttribute("already", "0");
						$zan.setAttribute("src", "../images/article/btn_good.png");
						$footer_zan.classList.remove("red");
						$footer_zan.classList.add("c666");
					}
					base.Get("footer_zan").innerHTML = data.Goods;
					base.Get("footer_comment").innerHTML = data.Comments;

					var themeColor = base.IsNullOrEmpty(data.ThemeColor) ? "#333" : data.ThemeColor;
					base.Get("title0").style.color = themeColor;
					base.Get("title1").style.color = themeColor;
					base.Get("nickname0").style.color = themeColor;
					base.Get("nickname1").style.color = themeColor;
					base.Get("createdate0").style.color = themeColor;
					base.Get("createdate1").style.color = themeColor;
					base.Get("views0").style.color = themeColor;
					base.Get("views1").style.color = themeColor;

					CurrBackgroundName = data.ThemeCover;

					CurrTemplate = data.Template;

					InitHeader(true);

					if(CurrTemplate == 1) {
						CurrTemplateType = 1;
					}
					if(data.TemplateJson != null) {
						if(data.TemplateJson.ID > 0) {
							CurrTemplateType = data.TemplateJson.TemplateType;
							CurrCover = data.TemplateJson.Cover;
							CurrColor = data.TemplateJson.Background;
						}
					}
					CurrBackground = data.BackgroundJson;

					ChangeBg();

					base.Get("musicname0").innerHTML = data.MusicName;

					base.Get("useravatar1").setAttribute("src", base.ShowThumb(data.Avatar, 1));

					base.InnerHtml(["title0", "title1", "title"], Article.Title);

					base.InnerHtml(["nickname", "nickname0", "nickname1"], Article.NickName);

					base.InnerHtml(["createdate0", "createdate1"], data.CreateDateText);

					base.InnerHtml(["views0", "views1"], "é˜…è¯»  " + data.Views);

					base.Get("desc").innerHTML = base.UnUnicodeText(html.join(""));

					//å®ä¾‹åŒ–æ’­æ”¾å™¨
					mui.each(mui(".youku_player"), function() {
						var $this = this;
						ShowVideo($this.getAttribute("id"), $this.getAttribute("sid"));
					})

					mui.each(mui(".video"), function() {
						var $this = this;
						//å¯ä»¥æ’­æ”¾
						$this.addEventListener('canplay', function() {
							$this.parentNode.classList.remove("hide");
							//document.addEventListener('touchstart', Video($this));

							/*var img = $($this).next("img")[0];
							img.addEventListener('tap', function() { 
								mui.toast("ok");
								if($this.paused) {
									item.classList.add("hide");
									$this.play();
								} else {
									$this.pause();
								}
							});*/
						});
						//æ’­æ”¾ç»“æŸ
						/*$this.addEventListener('ended', function() {
							var img = $($this).next("img")[0];
							item.classList.remove("hide");
						});*/
					});

					//éŸ³ä¹ 
					ChangeMusic();

					base.AddClass(["#main0", "#main1"], "hide");
					base.Get("main" + CurrTemplateType).classList.remove("hide");

					base.Get("bottomAction").classList.remove("hide");
					base.Get("bottomAction").classList.add("bounceIn");

					//å¯ç”¨æ‰“èµ
					if(data.IsPay == 1 && userinfo.Number != data.CreateUserNumber) {
						base.Get("btnPay").classList.remove("hide");
					}
					//æ”¶è—çŠ¶æ€ 
					if(data.IsKeep == 1) {
						base.Get("isnotkeep").classList.add("hide");
						base.Get("iskeep").classList.remove("hide");
					} else {
						base.Get("iskeep").classList.add("hide");
						base.Get("isnotkeep").classList.remove("hide");
					}

					//åˆ†äº«ä¿¡æ¯
					ShareInfo.Title = (userinfo.ShareNick == 1 ? "[" + Article.NickName + "]" : "") + Article.Title;
					ShareInfo.Cover = base.ShowThumb(data.Cover, 2);
					ShareInfo.Url = data.ShareUrl;

					//æŠ•ç¨¿é™åˆ¶æ“ä½œ
					if(data.Submission > 0 && data.Submission != 100) {
						base.AddClass(["#popover_delete", "#popover_edit", "#popover_power"], "hide");
					}
				} else {
					mui.toast(data.message);
					plus.webview.currentWebview().hide();
					plus.webview.currentWebview().close();
				}
			}
			if(callback) {
				callback(data);
			}
			base.ShowLoading(false);
			mask.close();
		});
	}

	function InitHeader(initload) {
		if(CurrTemplate == 0) {
			if(initload || !base.IsNullOrEmpty(CurrBackgroundName)) {
				$header.setAttribute("immersed", "");
				base.Immersed();
				base.Get("title1").classList.add("hide");
				$header.style.background = browserName + 'linear-gradient(left,rgba(78,140,251,1) 0%,rgba(36,195,251,1) 75%,rgba(57,184,253,1) 100%)';
				base.Get("wrapper").style.paddingTop = base.Get("header").clientHeight + "px";
			}
		} else {
			$header.setAttribute("immersed", "none");
			base.Immersed();
			var num = window.pageYOffset / 200;
			$header.style.background = browserName + 'linear-gradient(left,rgba(78,140,251,' + num + ') 0%,rgba(36,195,251,' + num + ') 75%,rgba(57,184,253,' + num + ') 100%)';
			base.Get("wrapper").style.paddingTop = "0px";
			base.Get("title1").classList.remove("hide");
		}
	}

	function Video(video) {
		document.removeEventListener('touchstart', Video(video));
		if(!video) {
			return;
		}
		if(video.paused) {
			video.play();
		} else {
			video.pause();
		}
	}

	//åˆ†äº«
	var shares = null; //åˆ†äº«æœåŠ¡
	var shareImageUrl = ''; //åˆ†äº«å›¾ç‰‡åœ°å€

	//æ›´æ–°åˆ†äº«æœåŠ¡
	function updateSerivces() {
		plus.share.getServices(function(s) {
			shares = {};
			for(var i in s) {
				var t = s[i];
				shares[t.id] = t;
			}
		}, function(e) {
			console.log("è·å–åˆ†äº«æœåŠ¡åˆ—è¡¨å¤±è´¥ï¼š" + e.message);
		});
	}

	//åˆ†äº«å¼¹çª—
	function ShareTan(index) {
		var myshare = base.Get("myshare");
		if(index == 0) {
			myshare.classList.remove("bounceInUp");
			myshare.classList.add("bounceOutUp");
		} else if(index == 1) {
			if(Article.ArticlePower == 0) {
				return mui.toast("ç§å¯†æ–‡ç« ä¸å¯ä»¥åˆ†äº«");
			} else {
				mask.show();
				myshare.classList.remove("hide");
				myshare.classList.remove("bounceOutUp");
				myshare.classList.add("bounceInUp");
			}
		} else {
			mask.close();
		}
	}

	//æ‰“å¼€æ”¯ä»˜
	function PaymentTan() {
		base.OpenWindow("money", "money.html", {
			ArticleNumber: Article.Number,
			ArticleUserNumber: Article.UserNumber,
			Name: Article.NickName,
			Avatar: Article.Avatar
		});
	}

	//è‡ªå®šä¹‰è£…æ‰®
	function Showy() {
		if(isLoading) {
			return;
		}
		isLoading = true;
		mui('#topPopover').popover('hide');
		base.OpenWindow("showy", "showy.html", {
			ArticleNumber: Article.Number
		});
		isLoading = false;
	}

	//åˆå§‹åŒ–è£…æ‰® 
	function InitShowy(src) {
		snow.clear();
		if(!base.IsNullOrEmpty(src)) {
			var srcs = src.split("|");
			if(srcs.length >= 2) {
				snow.init(srcs[0], srcs[1], srcs[2])
			} else {
				snow.init(src, 1, 0)
			}
		}
	}

	//åˆ†äº«ä¿¡æ¯
	function ShareAction(index) {
		ShareTan(2);

		//ç³»ç»Ÿåˆ†äº«
		if(index == 6) {
			ShareSystem();
			return;
		}
		//å¤åˆ¶é“¾æ¥
		if(index == 7) {
			CopyToClip();
			return;
		}
		//æ”¶è—
		if(index == 8) {
			Keep();
			return;
		}
		//ä¸¾æŠ¥
		if(index == 9) {
			base.OpenWindow("edittext", "edittext.html", {
				source: "report",
				ArticleNumber: Article.Number
			});
			return;
		}
		//å–æ¶ˆæ”¶è—
		if(index == 10) {
			OutKeep();
			return;
		}

		var id = "";
		var ex = "";
		switch(index) {
			//æœ‹å‹åœˆ
			case 1:
				id = "weixin";
				ex = "WXSceneTimeline";
				break;
				//å¾®ä¿¡
			case 2:
				id = "weixin";
				ex = "WXSceneSession";
				break;
				//æ–°æµªå¾®åš
			case 3:
				id = "sinaweibo";
				ex = "";
				break;
				//qq
			case 4:
				id = "qq";
				ex = "";
				break;
				//qqç©ºé—´
			case 5:
				id = "qq";
				ex = "";
				break;
			default:
				break;
		}
		var s = null;
		if(!id || !(s = shares[id])) {
			console.log("æ— æ•ˆçš„åˆ†äº«æœåŠ¡ï¼");
			return;
		}
		if(s.authenticated) {
			shareMessage(s, ex, id);
		} else {
			mui.toast("æˆæƒä¸­");
			s.authorize(function() {
				shareMessage(s, ex, id);
			}, function(e) {
				mui.toast("è®¤è¯æˆæƒå¤±è´¥");
			});
		}
	}

	//ç³»ç»Ÿåˆ†äº«
	function ShareSystem() {
		if(plus.os.name !== "Android") {
			plus.nativeUI.alert("æ­¤å¹³å°æš‚ä¸æ”¯æŒç³»ç»Ÿåˆ†äº«åŠŸèƒ½");
			return;
		}
		var intent = new Intent(Intent.ACTION_SEND);
		intent.setType("text/plain");
		intent.putExtra(Intent.EXTRA_SUBJECT, "");
		intent.putExtra(Intent.EXTRA_TEXT, "åˆ†äº«è‡ªã€Œå°å¾®ç¯‡ã€" + ShareInfo.Title + " " + ShareInfo.Url);
		intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
		main.startActivity(Intent.createChooser(intent, "ç³»ç»Ÿåˆ†äº«"));
		base.ShareLog(userinfo.Number, Article.Number, "system", 0);
	}

	//å‘é€åˆ†äº«ä¿¡æ¯
	function shareMessage(s, ex, id) {
		var msg = {
			href: ShareInfo.Url,
			title: ShareInfo.Title,
			content: "åˆ†äº«è‡ªã€Œå°å¾®ç¯‡ã€",
			thumbs: [ShareInfo.Cover],
			pictures: [ShareInfo.Cover],
			extra: {
				scene: ex
			}
		};
		s.send(msg, function() {
			mui.toast("åˆ†äº«æˆåŠŸ");
			base.ShareLog(userinfo.Number, Article.Number, id, 0);
		}, function(e) {
			mui.toast("åˆ†äº«å¤±è´¥");
		});
	}
</script>
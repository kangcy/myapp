<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../css/mui.min.css">
		<link rel="stylesheet" href="../css/articleTypeSub.css">
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a id="back" class="mui-icon mui-icon-back fl"></a>
			<h1 class="mui-title c333">文章类别</h1>
		</header>
		<div class="mui-iframe-wrapper" style="top:45px;bottom:0px;">
			<div class="mui-content mui-scroll-wrapper">
				<div class="mui-scroll">
					<div id="scroll-view">
					</div>
					<div class="mui-card">
						<ul class="mui-table-view">
							<li class="mui-table-view-cell mui-collapse">
								<a class="mui-navigate-right" href="#">表单</a>
								<div class="mui-collapse-content">
									<form class="mui-input-group">
										<div class="mui-input-row">
											<label>Input</label>
											<input type="text" placeholder="普通输入框">
										</div>
										<div class="mui-input-row">
											<label>Input</label>
											<input type="text" class="mui-input-clear" placeholder="带清除按钮的输入框">
										</div>

										<div class="mui-input-row mui-plus-visible">
											<label>Input</label>
											<input type="text" class="mui-input-speech mui-input-clear" placeholder="语音输入">
										</div>
										<div class="mui-button-row">
											<button class="mui-btn mui-btn-primary" type="button" onclick="return false;">确认</button>&nbsp;&nbsp;
											<button class="mui-btn mui-btn-primary" type="button" onclick="return false;">取消</button>
										</div>
									</form>
								</div>
							</li>
							<li class="mui-table-view-cell mui-collapse">
								<a class="mui-navigate-right" href="#">图片轮播</a>
								<div class="mui-collapse-content">
									<div id="slider" class="mui-slider">
										<div class="mui-slider-group mui-slider-loop">
											<!-- 额外增加的一个节点(循环轮播：第一个节点是最后一张轮播) -->
											<div class="mui-slider-item mui-slider-item-duplicate">
												<a href="#">
													<img src="../images/yuantiao.jpg">
												</a>
											</div>
											<!-- 第一张 -->
											<div class="mui-slider-item">
												<a href="#">
													<img src="../images/shuijiao.jpg">
												</a>
											</div>
											<!-- 第二张 -->
											<div class="mui-slider-item">
												<a href="#">
													<img src="../images/muwu.jpg">
												</a>
											</div>
											<!-- 第三张 -->
											<div class="mui-slider-item">
												<a href="#">
													<img src="../images/cbd.jpg">
												</a>
											</div>
											<!-- 第四张 -->
											<div class="mui-slider-item">
												<a href="#">
													<img src="../images/yuantiao.jpg">
												</a>
											</div>
											<!-- 额外增加的一个节点(循环轮播：最后一个节点是第一张轮播) -->
											<div class="mui-slider-item mui-slider-item-duplicate">
												<a href="#">
													<img src="../images/shuijiao.jpg">
												</a>
											</div>
										</div>
										<div class="mui-slider-indicator">
											<div class="mui-indicator mui-active"></div>
											<div class="mui-indicator"></div>
											<div class="mui-indicator"></div>
											<div class="mui-indicator"></div>
										</div>
									</div>
								</div>
							</li>
							<li class="mui-table-view-cell mui-collapse">
								<a class="mui-navigate-right" href="#">文字排版</a>
								<div class="mui-collapse-content">
									<h1>h1. Heading</h1>
									<h2>h2. Heading</h2>
									<h3>h3. Heading</h3>
									<h4>h4. Heading</h4>
									<h5>h5. Heading</h5>
									<h6>h6. Heading</h6>
									<p>
										p. 目前最接近原生App效果的框架。
									</p>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</body>

</html>
<script src="../js/default.js"></script>
<script src="../js/jquery-1.10.2.min.js"></script>
<script src="../js/mui.min.js"></script>
<script src="../js/base.js"></script>
<script type="text/javascript">
	var ArticleID = 0; //文章ID
	var ArticleType = 0; //文章类型ID
	var ArticleTypeName = 0; //文章类型名称
	var userinfo = base.GetUserInfo();
	var shareSettingPage = null;
	mui.init({
		gestureConfig: {
			doubletap: true
		},
		swipeBack: false //启用右滑关闭功能
	});

	$(function() {
		mui('.mui-scroll-wrapper').scroll({
			indicators: false //不显示滚动条
		});

		//选中切换
		$("#scroll-view").on('tap', 'div.mui-table-view-cell', function(event) {
			$(".check").removeClass("check");
			$(this).find(".oa-contact-icon").addClass("check");
			ArticleType = $(this).find(".oa-contact-icon").attr("type");
			ArticleTypeName = $(this).find(".oa-contact-icon").attr("name");
		});

	});

	mui.plusReady(function() {

		var self = plus.webview.currentWebview();
		ArticleID = self.ArticleID;
		ArticleType = self.ArticleType;
		ArticleTypeName = self.ArticleTypeName;

		Load();

		//返回
		document.getElementById("back").addEventListener('tap', function(event) {
			mui.back();
		});
	});
	Load();
	//加载数据
	function Load(callback) {
		if(base.IsTest) {
			var table = document.getElementById('scroll-view');
			for(var i = 1; i < 6; i++) {
				var item = {
					ID: i,
					Cover: "http://www.dcloud.io/hellomui/images/" + i + ".jpg",
					Name: "动漫" + i,
					Summary: "15145人订阅"
				}
				table.appendChild(appendStr(item));
			}
		} else {
			HttpGet(base.RootUrl + "ArticleType/All", {}, function(data) {
				if(data != null) {
					var length = data.list.length;
					if(length > 0) {
						var table = document.getElementById('scroll-view');
						for(var i = 0, len = data.list.length; i < len; i++) {
							var div = appendStr(data.list[i]);
							table.appendChild(div);
						}
					}
				}
				if($.isFunction(callback)) {
					callback();
				}
			});
		}
	}

	//拼接Html
	function appendStr(item) {
		var div = document.createElement('div');
		div.className = 'mui-table-view-cell';
		var model = [];
		model.push('<div class="mui-slider-cell"><div class="oa-contact-cell mui-table">');
		//分类图片
		model.push('<div class="oa-contact-avatar mui-table-cell"><img src="' + item.Cover + '" /></div>');
		//分类信息
		model.push('<div  class="mui-table-cell oa-contact-content"><div class="mui-clearfix"><p class="f13 mb5 c000">' + item.Name + '</p></div><p class="f11 caaa">' + item.Summary + '</p></div>');
		//关注
		model.push('<div class="oa-contact-icon mui-table-cell"><div class="guanzhu f13">关 注</div></div>');
		model.push('</div>');
		div.innerHTML = model.join('');
		return div;
	}
</script>
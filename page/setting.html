<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../css/mui.min.css">
		<style type="text/css">
			body {
				background: #eee;
			}
			
			.mui-bar {
				background: #fff;
			}
			
			.mui-table-view-cell {
				padding: .8rem 0.9375rem;
			}
			
			.mui-table-view-cell:after {
				left: 0.9375rem;
				right: 0.9375rem;
			}
			
			.mui-table-view:after {
				height: 0px;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a id="back" class="mui-icon mui-icon-back fl"></a>
			<h1 class="mui-title c333">通用设置</h1>
		</header>
		<div class="mui-content">
			<ul class="mui-table-view f11" style="margin-top:0px;">
				<li class="mui-table-view-cell">
					<span class="fl">绑定手机号</span>
					<span class="mui-pull-right caaa">18652913873</span>
				</li>
				<li class="mui-table-view-cell">
					<span class="fl">绑定微信号</span>
					<span class="mui-pull-right caaa">18652913873</span>
				</li>
				<li class="mui-table-view-cell">
					<span class="fl">绑定邮箱</span>
					<span class="mui-pull-right caaa">735149528@qq.com</span>
				</li>
				<li class="mui-table-view-cell">
					<span class="fl">清除缓存</span>
					<span class="mui-pull-right caaa">600M</span>
				</li>
				<li class="mui-table-view-cell">
					<span class="fl">分享带昵称</span>
					<div class="mui-switch mui-switch-blue mui-active">
						<div class="mui-switch-handle"></div>
					</div>
				</li>
				<li class="mui-table-view-cell">
					<span class="fl">音乐自动播放</span>
					<div class="mui-switch mui-switch-blue mui-active">
						<div class="mui-switch-handle"></div>
					</div>
				</li>
				<li id="account" class="mui-table-view-cell">
					账号与安全
				</li>
				<li class="mui-table-view-cell">
					检查更新
				</li>
			</ul>
			<div style="background: #eee;width:100%;height:10px;"></div>
			<ul class="mui-table-view f11">
				<li class="mui-table-view-cell">
					<a id="exit" style="text-align: center;color: #FF3B30;">
						退出登录
					</a>
				</li>
			</ul>
		</div>
	</body>

</html>
<script src="../js/default.js"></script>
<script src="../js/jquery-1.10.2.min.js"></script>
<script src="../js/mui.min.js"></script>
<script src="../js/base.js"></script>
<script src="../js/login.js"></script>
<script type="text/javascript">
	mui.init({
		gestureConfig: {
			doubletap: true
		},
		swipeBack: false //启用右滑关闭功能
	});

	//返回
	document.getElementById("back").addEventListener('tap', function(event) {
		mui.back();
	});

	/*
	 * 账号与安全
	 */
	var subWebview = null,
		template = null;
	document.getElementById('account').addEventListener('tap', function() {
		if(!mui.os.plus) {
			mui.openWindow({
				url: "account_setting.html",
				id: "account_setting",
				show: {
					aniShow: 'zoom-fade-out',
					duration: 300
				}
			});
			return;
		}
		//获取共用父窗体
		if(subWebview == null) {
			template = plus.webview.getWebviewById("default-main");
		}
		if(template) {
			subWebview = template.children()[0];
			subWebview.loadURL('account_setting.html');
			mui.fire(template, 'updateHeader', {
				title: '账号与安全',
				showMenu: false
			});
			template.show('slide-in-right', 150);
		}
	});

	mui.plusReady(function() {

		//退出操作******************
		document.getElementById('exit').addEventListener('tap', function() {
			var btnArray = [{
				title: "注销当前账号"
			}, {
				title: "直接关闭应用"
			}];
			plus.nativeUI.actionSheet({
				cancel: "取消",
				buttons: btnArray
			}, function(event) {
				var index = event.index;
				switch(index) {
					case 1:
						app.loginOut();
						var loginPage = plus.webview.getWebviewById("login");
						if(loginPage != null) {
							plus.webview.close(loginPage)
						}
						var indexPage = plus.webview.getWebviewById("index");
						if(indexPage != null) {
							plus.webview.close(indexPage)
						}
						var subindexPage = plus.webview.getWebviewById("subindex");
						if(subindexPage != null) {
							plus.webview.close(subindexPage)
						}
						mui.openWindow({
							url: 'login.html',
							id: 'login',
							show: {
								autoShow: true,
								duration: base.AnimateDuration
							},
							waiting: {
								autoShow: false
							}
						});
						break;
					case 2:
						plus.runtime.quit();
						break;
				}
			});
		}, false);
	});
</script>
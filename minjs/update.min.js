var UpdateUrl="";function Check_Update(a){plus.runtime.getProperty(plus.runtime.appid,function(c){var b=c.version;if(mui.os.ios){client="ios"}else{client="android"}HttpGet(base.RootUrl+"System/CheckUpdate",{version:b,client:client},function(d){base.CloseWaiting();if(d==null){a(null);return}if(d.result){a(d)}else{a(null)}})})}function Download(){base.Get("myprogress_btn").classList.add("hide");base.Get("myprogress_progress").classList.remove("hide");var b=base.Get("persent");var a=base.Get("proDownFile");var d=document.getElementById("proDownFile").clientWidth;base.Get("persent").style.width=document.getElementById("myprogress_progress").clientWidth*0.16+"px";var e=plus.downloader.createDownload(UpdateUrl,{},function(h,f){if(f==200){Close();clearInterval(c);b.innerHTML="100%";plus.nativeUI.toast("正在准备安装环境，请稍后！");var g=h.filename;plus.runtime.install(g,false,function(){},function(){})}else{mui.toast("更新失败");Next()}});e.start();var c=setInterval(function(){var f=e.totalSize;if(f>0){a.setAttribute("max",f);var g=e.downloadedSize;a.setAttribute("value",g);b.style.left=d*g/f+"px";b.innerHTML=parseInt(100*g/f)+"%"}},100)}function Next(){base.Get("myprogress").classList.add("hide");base.Get("proDownFile").setAttribute("value",0);base.Get("proDownFile").setAttribute("max",0);base.Get("persent").style.left="0px";base.Get("persent").innerHTML="0%"}function Close(){plus.webview.close("update")};
//文章段落互换效果
function Group(ele, margin) {

	margin = margin || 0;
	var panels = children(ele);

	mui.each(mui(".edit-body"), function(i, item) {
		item.setAttribute("id", "panel" + i);
		var $item = $(item);
		$item.find(".edit-up")[0].onclick = function() {
			moveup(i)
		};
		$item.find(".edit-down")[0].onclick = function() {
			movedown(i)
		};
		$item.find(".edit-content").attr("id", "edit-content" + i);
	})

	check();

	function check() {
		var length = mui(".edit-body").length;
		mui.each(mui(".edit-body"), function(i, item) {
			var $item = $(item);
			$item.find(".edit-up,.edit-down").addClass("hide");
			$item.find(".edit-up,.edit-down").removeClass("first last");
			if(i == 0) {
				$item.find(".edit-up,.edit-down").addClass("first");
			}
			if(i == length - 1) {
				$item.find(".edit-up,.edit-down").addClass("last");
			}
			$item.find(".edit-up,.edit-down").removeClass("hide");
		});
	}

	//向上移动
	function moveup(i) {
		/*var p = evt ? evt.target : event.srcElement;
		p = p.parentNode;
		swap(p, panels[p.index - 1]);*/
	}

	//向下移动
	function movedown(i) {
		var p1 = mui(".edit-body")[i];
		var p2 = mui(".edit-body")[i + 1];

		var html1 = p1.innerHTML;
		var html2 = p2.innerHTML;

		console.log(p1.innerHTML + "," + p2.innerHTML)

		p1.style.transform = "translate(0," + p2.clientHeight + "px)";
		p1.style.transitionDuration = "0.5s";

		p2.style.transform = "translate(0," + (-p1.clientHeight) + "px)";
		p2.style.transitionDuration = "0.5s";

		//swap(i, i + 1);
		mui.later(function() {

			mui(".edit-body")[i].style.transform = "none";
			mui(".edit-body")[i].style.transitionDuration = "0s";
			mui(".edit-body")[i].innerHTML = html2;

			mui(".edit-body")[i + 1].style.transform = "none";
			mui(".edit-body")[i + 1].style.transitionDuration = "0s";

			mui(".edit-body")[i + 1].innerHTML = html1;
			check();
		}, 500);
	}

	//交换位置
	function swap(p1, p2) {
		//交换元素
		//check(p1.index, p2.index);
	}

	function children(e) {
		var ret = [];
		for(var i = 0, c = e.childNodes; i < c.length; i++)
			if(c[i].nodeType == 1)
				ret.push(c[i]);
		return ret;
	}
}
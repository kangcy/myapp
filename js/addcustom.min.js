function Camera(){mui("#upload").popover("hide");plus.camera.getCamera().captureImage(function(e){plus.io.resolveLocalFileSystemURL(e,function(e){mask.show(),base.ShowWaiting("正在压缩图片"),fileIndex=0,fileTotal=1,files=[];compressImage(e.toLocalURL(),"_downloads/"+base.GetUid()+".jpg")})})}function Gallery(){mui("#upload").popover("hide"),plus.gallery.pick(function(e){mask.show(),base.ShowWaiting("正在压缩图片"),fileIndex=0,fileTotal=e.files.length,files=[];for(var i=0;i<e.files.length;i++){var l="_downloads/"+base.GetUid()+".jpg";compressImage(e.files[i],l)}},function(e){console.log("取消选择图片")},{filter:"image",multiple:!0,maximum:0==multiple?1:5,system:!1})}function compressImage(e,i){plus.zip.compressImage({src:e,dst:i,overwrite:!0,quality:90,width:"720px",format:"jpg"},function(e){fileIndex++,files.push(e.target),fileIndex>=fileTotal&&base.OpenWindow("custom","custom.html",{ArticleNumber:articleNumber,Url:files.join(",")})},function(e){if(fileTotal<=1)return mask.close(),mui.toast("图片读取异常，换张别的试试吧");++fileIndex>=fileTotal&&base.OpenWindow("custom","custom.html",{ArticleNumber:articleNumber,Url:files.join(",")})})}function Import(e){base.ShowWaiting("正在同步段落信息");for(var i=e.split(","),l=i.length,o=0;o<l;o++)AddPic(base.GetUid(),i[o],0),o>=l-1&&mask.close()}var fileIndex=0,fileTotal=0,files=[],mask=base.CreateMask(!1,function(){base.CloseWaiting()});